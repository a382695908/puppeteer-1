<!DOCTYPE html><html lang="en"><head><title>src/app/modules/muppets/list/list-controller</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../../../../"><meta name="groc-document-path" content="src/app/modules/muppets/list/list-controller"><meta name="groc-project-path" content="src/app/modules/muppets/list/list-controller.coffee"><link rel="stylesheet" type="text/css" media="all" href="../../../../../assets/style.css"><script type="text/javascript" src="../../../../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">src/app/modules/muppets/list/list-controller.coffee</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="list-controller">List Controller</h1>

<p>This controller will handle everything related to the "list" action
of the <code>Muppet</code> module.
Extends from <code>App.Controllers.Application</code>, which in the end is nothing
but a custom extension of <code>Marionette.Controller</code>.</p></div></div><div class="code"><div class="wrapper"><span class="nx">@App</span><span class="p">.</span><span class="nx">module</span> <span class="s">&quot;MuppetsModule.List&quot;</span><span class="p">,</span> <span class="nf">(List, App, Backbone, Marionette, $, _) -&gt;</span>

  <span class="k">class</span> <span class="nx">List</span><span class="p">.</span><span class="nx">Controller</span> <span class="k">extends</span> <span class="nx">App</span><span class="p">.</span><span class="nx">Controllers</span><span class="p">.</span><span class="nx">Application</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="initialize">Initialize</h2>

<p>Shows a <code>List.LayoutView</code> containing the list of <code>Muppet</code> models
and a filtering text box.</p></div></div><div class="code"><div class="wrapper">    <span class="nv">initialize: </span><span class="nf">-&gt;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Instantiates the <code>LayoutView</code></p></div></div><div class="code"><div class="wrapper">      <span class="vi">@layout = </span><span class="nx">@getLayoutView</span><span class="p">()</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Get the <code>Muppets</code> collection</p></div></div><div class="code"><div class="wrapper">      <span class="vi">@muppets = </span><span class="nx">App</span><span class="p">.</span><span class="nx">request</span> <span class="s">&quot;muppet:entities&quot;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Get the <code>Muppets</code> to be shown on the list</p></div></div><div class="code"><div class="wrapper">      <span class="vi">@visibleMuppets = </span><span class="nx">@getVisibleMuppets</span> <span class="nx">@muppets</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>When the layout is shown, the <code>FilterRegion</code>
and the <code>ContentRegion</code> are set up</p></div></div><div class="code"><div class="wrapper">      <span class="nx">@listenTo</span> <span class="nx">@layout</span><span class="p">,</span> <span class="s">&quot;show&quot;</span><span class="p">,</span> <span class="o">=&gt;</span>
        <span class="nx">@handleFilterRegion</span><span class="p">()</span>
        <span class="nx">@handleContentRegion</span><span class="p">()</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Shows the <code>LayoutView</code></p></div></div><div class="code"><div class="wrapper">      <span class="nx">@show</span> <span class="nx">@layout</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="applyfilter">applyFilter</h2>

<p>Filters the <code>Muppets</code> list with those who matches
the given text.</p></div></div><div class="code"><div class="wrapper">    <span class="nv">applyFilter: </span><span class="nf">(text) =&gt;</span>
      <span class="nx">@visibleMuppets</span><span class="p">.</span><span class="nx">reset</span> <span class="nx">@muppets</span><span class="p">.</span><span class="nx">filterByName</span><span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">trim</span><span class="p">())</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="getvisiblemuppets">getVisibleMuppets</h2>

<p>Returns a clone of the <code>Muppets</code> list, to be used as a
filterable list show on the interface.</p></div></div><div class="code"><div class="wrapper">    <span class="nv">getVisibleMuppets: </span><span class="nf">-&gt;</span>
      <span class="nx">@visibleMuppets</span> <span class="o">or=</span> <span class="k">new</span> <span class="nx">@muppets</span><span class="p">.</span><span class="nx">constructor</span><span class="p">(</span><span class="nx">@muppets</span><span class="p">.</span><span class="nx">models</span><span class="p">)</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="handlefilterregion">handleFilterRegion</h2>

<p>Shows the filter component on the <code>filterRegion</code> of the <code>LayoutView</code>,
handling all the events produced by the component.</p></div></div><div class="code"><div class="wrapper">    <span class="nv">handleFilterRegion: </span><span class="nf">-&gt;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Request the component</p></div></div><div class="code"><div class="wrapper">      <span class="nv">filterComponent = </span><span class="nx">App</span><span class="p">.</span><span class="nx">request</span> <span class="s">&quot;filter:component&quot;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Set the controller to listen to the <code>filter:text:changed</code> event
from the component. When it occurs, performs the filtering of the
<code>Muppets</code> list</p></div></div><div class="code"><div class="wrapper">      <span class="nx">@listenTo</span> <span class="nx">filterComponent</span><span class="p">,</span> <span class="s">&quot;filter:text:changed&quot;</span><span class="p">,</span> <span class="nx">@applyFilter</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Shows the component on the <code>filterRegion</code> of the <code>LayoutView</code></p></div></div><div class="code"><div class="wrapper">      <span class="nx">@show</span> <span class="nx">filterComponent</span><span class="p">,</span> <span class="nv">region: </span><span class="nx">@layout</span><span class="p">.</span><span class="nx">filterRegion</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="handlecontentregion">handleContentRegion</h2>

<p>Shows a <code>ListView</code> on the <code>contentRegion</code> of the <code>LayoutView</code>,
handling all the events produced by the view.</p></div></div><div class="code"><div class="wrapper">    <span class="nv">handleContentRegion: </span><span class="nf">-&gt;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Instances the <code>ListView</code></p></div></div><div class="code"><div class="wrapper">      <span class="nv">listView = </span><span class="nx">@getListView</span><span class="p">()</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Set the controller to listen to the <code>itemview:muppet:clicked</code> event
from the <code>ListView</code>. When it occurs, triggers a <code>muppet:selected</code> event
passing the clicked <code>Muppet</code>. That event is handled
on the <a href="../muppet.html">Muppet module</a>.</p></div></div><div class="code"><div class="wrapper">      <span class="nx">@listenTo</span> <span class="nx">listView</span><span class="p">,</span> <span class="s">&quot;itemview:muppet:clicked&quot;</span><span class="p">,</span> <span class="nf">(itemView, opts) -&gt;</span>
        <span class="nx">App</span><span class="p">.</span><span class="nx">vent</span><span class="p">.</span><span class="nx">trigger</span> <span class="s">&quot;muppet:selected&quot;</span><span class="p">,</span> <span class="nx">opts</span><span class="p">.</span><span class="nx">model</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Shows the <code>ListView</code> on the <code>contentRegion</code> of the <code>LayoutView</code>.</p></div></div><div class="code"><div class="wrapper">      <span class="nx">@show</span> <span class="nx">listView</span><span class="p">,</span> <span class="nv">region: </span><span class="nx">@layout</span><span class="p">.</span><span class="nx">contentRegion</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="getlistview">getListView</h2>

<p>Returns a new instance of a <code>ListView</code>, passing the list of filterable
<code>Muppets</code></p></div></div><div class="code"><div class="wrapper">    <span class="nv">getListView: </span><span class="nf">-&gt;</span>
      <span class="k">new</span> <span class="nx">List</span><span class="p">.</span><span class="nx">ListView</span>
        <span class="nv">collection: </span><span class="nx">@visibleMuppets</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="getlayoutview">getLayoutView</h2>

<p>Returns a new instance of a <code>LayoutView</code></p></div></div><div class="code"><div class="wrapper">    <span class="nv">getLayoutView: </span><span class="nf">-&gt;</span>
      <span class="k">new</span> <span class="nx">List</span><span class="p">.</span><span class="nx">Layout</span><span class="p">()</span></div></div></div></div></body></html>